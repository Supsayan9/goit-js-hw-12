{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '45539852-e7385dbf9677b23660ec365b6';\n\nexport const getPhotos = async (searchValue, page) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n\n    if (response.status !== 200) {\n      throw new Error(`Error: ${response.status}`);\n    }\n\n    return response.data;\n  } catch (error) {\n    iziToast.show({\n      message: `Error: ${error.message}`,\n      position: 'topRight',\n      backgroundColor: '#ef4040',\n      titleColor: '#fff',\n      titleSize: '16px',\n      messageColor: '#fff',\n      messageSize: '16px',\n      maxWidth: '385px',\n      timeout: 5000,\n    });\n\n    throw error;\n  }\n};\n","export const createGalleryElement = galleryElementInfo => {\n  return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${galleryElementInfo.largeImageURL}\">\n        <img class=\"gallery-img\"\n          src=\"${galleryElementInfo.webformatURL}\"\n          alt=\"${galleryElementInfo.tags}\"\n          loading=\"lazy\" />\n      </a>\n      <ul class=\"gallery-info\">\n        <li class=\"gallery-info-item\">\n          <p class=\"gallery-info-title\">Likes</p>\n          <p class=\"gallery-info-text\">${galleryElementInfo.likes}</p>\n        </li>\n        <li class=\"gallery-info-item\">\n          <p class=\"gallery-info-title\">Views</p>\n          <p class=\"gallery-info-text\">${galleryElementInfo.views}</p>\n        </li>\n        <li class=\"gallery-info-item\">\n          <p class=\"gallery-info-title\">Comments</p>\n          <p class=\"gallery-info-text\">${galleryElementInfo.comments}</p>\n        </li>\n        <li class=\"gallery-info-item\">\n          <p class=\"gallery-info-title\">Downloads</p>\n          <p class=\"gallery-info-text\">${galleryElementInfo.downloads}</p>\n        </li>\n      </ul>\n    </li>\n  `;\n};\n\n\nexport const renderGallery = items => {\n  const galleryList = document.querySelector('.gallery-list');\n  const galleryItems = items.map(createGalleryElement).join('');\n  galleryList.insertAdjacentHTML('beforeend', galleryItems);\n};\n","import { getPhotos } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet currentPage = 1;\nlet searchQuery = '';\nlet totalHits = 0;\nlet lightbox;\n\nconst form = document.querySelector('.form');\nconst loadMoreButton = document.getElementById('load-more');\nconst endMessage = document.getElementById('end-message');\nconst loaderBox = document.querySelector('.loader-box');\n\nform.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  searchQuery = e.target.elements.search.value.trim();\n  currentPage = 1;\n  totalHits = 0;\n  document.querySelector('.gallery-list').innerHTML = '';\n  loadMoreButton.style.display = 'none';\n  endMessage.style.display = 'none';\n  loaderBox.classList.add('loader-box-active');\n\n  try {\n    const data = await getPhotos(searchQuery, currentPage);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      endMessage.style.display = 'block';\n      endMessage.textContent = 'No images found. Please try a different search term.';\n      return;\n    }\n\n    renderGallery(data.hits);\n\n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.gallery-list a', { captionsData: 'alt', captionDelay: 250 });\n    } else {\n      lightbox.refresh();\n    }\n\n    const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n\n    if (totalHits > currentPage * 15) {\n      loadMoreButton.style.display = 'block';\n    } else {\n      endMessage.style.display = 'block';\n    }\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth'\n    });\n\n  } catch (error) {\n    console.error(error);\n  } finally {\n    loaderBox.classList.remove('loader-box-active');\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage++;\n  loaderBox.classList.add('loader-box-active');\n\n  try {\n    const data = await getPhotos(searchQuery, currentPage);\n    renderGallery(data.hits);\n\n    if (lightbox) {\n      lightbox.refresh();\n    }\n\n    const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n\n    if (totalHits <= currentPage * 15) {\n      loadMoreButton.style.display = 'none';\n      endMessage.style.display = 'block';\n    }\n\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth'\n    });\n\n  } catch (error) {\n    console.error(error);\n  } finally {\n    loaderBox.classList.remove('loader-box-active');\n  }\n});"],"names":["BASE_URL","API_KEY","getPhotos","searchValue","page","response","axios","error","iziToast","createGalleryElement","galleryElementInfo","renderGallery","items","galleryList","galleryItems","currentPage","searchQuery","totalHits","lightbox","form","loadMoreButton","endMessage","loaderBox","data","SimpleLightbox","cardHeight"],"mappings":"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"}