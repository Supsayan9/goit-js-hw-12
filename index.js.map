{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error-massage.svg","../src/main.js"],"sourcesContent":["const BASE_URL = 'https://pixabay.com/api/?';\n\nexport const gethPhotos = (searchValue, page) => {\n  const options = new URLSearchParams({\n    key: '45539852-e7385dbf9677b23660ec365b6',\n    q: searchValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15\n  });\n\n  return fetch(`${BASE_URL}${options}`).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n\n    return response.json();\n  });\n};\n","export const createGalleryElement = galleryElementInfo => {\n    return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${galleryElementInfo.largeImageURL}\">\n        <img class=\"gallery-img\"\n        src=\"${galleryElementInfo.webformatURL}\"\n        alt=\"${galleryElementInfo.tags}\"\n        loading=\"lazy\" />\n      </a>\n      <ul class=\"gallery-info\">\n        <li class=\"gallery-info-item\">\n          <p class=\"gallery-info-title\">Likes</p>\n          <p class=\"gallery-info-text\">${galleryElementInfo.likes}</p>\n        </li>\n        <li class=\"gallery-info-item\">\n          <p class=\"gallery-info-title\">Views</p>\n          <p class=\"gallery-info-text\">${galleryElementInfo.views}</p>\n        </li>\n        <li class=\"gallery-info-item\">\n          <p class=\"gallery-info-title\">Comments</p>\n          <p class=\"gallery-info-text\">${galleryElementInfo.comments}</p>\n        </li>\n        <li class=\"gallery-info-item\">\n          <p class=\"gallery-info-title\">Downloads</p>\n          <p class=\"gallery-info-text\">${galleryElementInfo.downloads}</p>\n        </li>\n      </ul>\n    </li>\n    `;\n  };","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='none'%3e%3cpath%20fill='%23FAFAFB'%20d='M6.81.219A.75.75%200%200%201%207.34%200h9.32a.75.75%200%200%201%20.53.219l6.591%206.591a.75.75%200%200%201%20.219.53v9.32a.75.75%200%200%201-.219.53l-6.591%206.591a.75.75%200%200%201-.53.219H7.34a.75.75%200%200%201-.53-.219L.219%2017.19A.75.75%200%200%201%200%2016.66V7.34a.75.75%200%200%201%20.219-.53L6.81.219ZM7.65%201.5%201.5%207.65v8.7l6.15%206.15h8.7l6.15-6.15v-8.7L16.35%201.5h-8.7Z'/%3e%3cpath%20fill='%23FAFAFB'%20d='M6.969%206.97a.75.75%200%200%201%201.062%200L12%2010.94l3.969-3.97a.75.75%200%201%201%201.062%201.061l-3.97%203.97%203.97%203.968a.753.753%200%200%201%200%201.062.749.749%200%200%201-1.062%200L12%2013.061l-3.969%203.97a.75.75%200%200%201-1.225-.243.751.751%200%200%201%20.163-.819L10.939%2012%206.97%208.031a.75.75%200%200%201%200-1.062Z'/%3e%3c/svg%3e\"","import iziToast from 'izitoast';\nimport { gethPhotos } from './js/pixabay-api';\nimport { createGalleryElement } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport errorMessage from './img/error-massage.svg';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery-list');\nconst loaderBox = document.querySelector('.loader-box');\nconst loadMoreButton = document.getElementById('load-more');\nconst endMessage = document.getElementById('end-message');\n\nlet currentPage = 1;\nlet totalPages = 1; // Initialize with 1 or adjust as per your API\n\nconst simpleLightbox = new SimpleLightbox('.gallery-list a', {\n  captionDelay: 250,\n  captionPosition: 'bottom',\n  captionsData: 'alt',\n  overlayOpacity: 1,\n});\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  const searchInputValue = form.elements.search.value.trim();\n  if (searchInputValue === '') return;\n\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loaderBox.classList.add('loader-box-active');\n  loadMoreButton.style.display = 'none';\n  endMessage.style.display = 'none';\n\n  gethPhotos(searchInputValue, currentPage)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.show({\n          message: 'Sorry, there are no images matching your search query. Please, try again!',\n          position: 'topRight',\n          backgroundColor: '#ef4040',\n          titleColor: '#fff',\n          titleSize: '16px',\n          messageColor: '#fff',\n          messageSize: '16px',\n          iconUrl: errorMessage,\n          maxWidth: '385px',\n          timeout: 5000,\n        });\n        form.reset();\n        form.elements.search.focus();\n        return;\n      }\n\n      totalPages = Math.ceil(data.totalHits / 15); // Assuming 15 items per page\n      displayImages(data);\n      form.reset();\n      form.elements.search.focus();\n    })\n    .catch(err => {\n      console.log(err);\n    })\n    .finally(() => {\n      loaderBox.classList.remove('loader-box-active');\n    });\n}\n\nfunction onLoadMore() {\n  if (currentPage >= totalPages) return;\n\n  currentPage++;\n  const searchInputValue = form.elements.search.value.trim();\n  loaderBox.classList.add('loader-box-active');\n\n  gethPhotos(searchInputValue, currentPage)\n    .then(data => {\n      displayImages(data);\n    })\n    .catch(err => {\n      console.log(err);\n    })\n    .finally(() => {\n      loaderBox.classList.remove('loader-box-active');\n    });\n}\n\nfunction displayImages(data) {\n  if (data.hits.length === 0 || currentPage >= totalPages) {\n    loadMoreButton.style.display = 'none';\n    endMessage.style.display = 'block';\n    return;\n  }\n\n  const galleryCardsTemplate = data.hits\n    .map(imgInfo => createGalleryElement(imgInfo))\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n  simpleLightbox.refresh();\n\n  if (currentPage < totalPages) {\n    loadMoreButton.style.display = 'block';\n  }\n}\n"],"names":["BASE_URL","gethPhotos","searchValue","page","options","response","createGalleryElement","galleryElementInfo","errorMessage","form","gallery","loaderBox","loadMoreButton","endMessage","currentPage","totalPages","simpleLightbox","SimpleLightbox","onFormSubmit","onLoadMore","searchInputValue","data","iziToast","displayImages","err","galleryCardsTemplate","imgInfo"],"mappings":"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"}